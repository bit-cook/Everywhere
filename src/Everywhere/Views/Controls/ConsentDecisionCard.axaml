<ResourceDictionary
  xmlns="https://github.com/avaloniaui" xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:permissions="clr-namespace:Everywhere.Chat.Permissions" xmlns:v="using:Everywhere.Views">
  <Design.PreviewWith>
    <v:ConsentDecisionCard/>
  </Design.PreviewWith>

  <ControlTheme
    x:Key="{x:Type v:ConsentDecisionCard}"
    TargetType="v:ConsentDecisionCard">
    <Setter Property="Padding" Value="8"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Background" Value="{DynamicResource CardBackgroundColor}"/>
    <Setter Property="BorderBrush" Value="{DynamicResource BorderColor}"/>
    <Setter Property="CornerRadius" Value="{DynamicResource XlCornerRadius}"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Disabled"/>
    <Setter Property="Template">
      <Setter.Value>
        <ControlTemplate TargetType="v:ConsentDecisionCard">
          <Border
            Background="{TemplateBinding Background}"
            BorderBrush="{TemplateBinding BorderBrush}"
            BorderThickness="{TemplateBinding BorderThickness}"
            CornerRadius="{TemplateBinding CornerRadius}">
            <ExperimentalAcrylicBorder
              Name="PART_AcrylicBorder"
              CornerRadius="{TemplateBinding CornerRadius}"
              IsVisible="False">
              <ExperimentalAcrylicBorder.Material>
                <ExperimentalAcrylicMaterial
                  FallbackColor="#15000000" MaterialOpacity="0.4"
                  TintColor="Black" TintOpacity="0.2"/>
              </ExperimentalAcrylicBorder.Material>

              <Grid
                Margin="{TemplateBinding Padding}"
                RowDefinitions="Auto,Auto,Auto" RowSpacing="8">

                <ContentPresenter
                  Grid.Row="0" HorizontalAlignment="Center"
                  Content="{TemplateBinding Header}"
                  IsVisible="{TemplateBinding Header, Converter={x:Static ObjectConverters.IsNotNull}}"
                  TextAlignment="Center"/>

                <ScrollViewer
                  Grid.Row="1"
                  HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}"
                  IsVisible="{TemplateBinding Content, Converter={x:Static ObjectConverters.IsNotNull}}"
                  VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}">
                  <ContentPresenter Content="{TemplateBinding Content}"/>
                </ScrollViewer>

                <StackPanel
                  Grid.Row="2" Spacing="4">
                  <Button
                    Classes="Primary"
                    Command="{Binding SelectConsentCommand, RelativeSource={RelativeSource TemplatedParent}}"
                    CommandParameter="{x:Static permissions:ConsentDecision.AllowOnce}"
                    Content="{I18N {x:Static LocaleKey.ConsentDecision_AllowOnce}}"/>
                  <Button
                    Classes="Secondary"
                    Command="{Binding SelectConsentCommand, RelativeSource={RelativeSource TemplatedParent}}"
                    CommandParameter="{x:Static permissions:ConsentDecision.Deny}"
                    Content="{I18N {x:Static LocaleKey.ConsentDecision_Deny}}"/>
                  <Button
                    Classes="Secondary"
                    Command="{Binding SelectConsentCommand, RelativeSource={RelativeSource TemplatedParent}}"
                    CommandParameter="{x:Static permissions:ConsentDecision.AllowSession}"
                    Content="{I18N {x:Static LocaleKey.ConsentDecision_AllowSession}}"/>
                  <Button
                    Classes="Ghost Compact"
                    Command="{Binding SelectConsentCommand, RelativeSource={RelativeSource TemplatedParent}}"
                    CommandParameter="{x:Static permissions:ConsentDecision.AlwaysAllow}"
                    Content="{I18N {x:Static LocaleKey.ConsentDecision_AlwaysAllow}}"/>
                </StackPanel>
              </Grid>
            </ExperimentalAcrylicBorder>
          </Border>
        </ControlTemplate>
      </Setter.Value>
    </Setter>
  </ControlTheme>
</ResourceDictionary>
